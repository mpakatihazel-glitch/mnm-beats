<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROD MNM | THE VAULT</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --red: #ff0033; --black: #050505; --grey: #111; }
        * { box-sizing: border-box; }
        body { background-color: var(--black); color: white; font-family: 'Inter', sans-serif; margin: 0; -webkit-font-smoothing: antialiased; }
        .container { width: 92%; max-width: 1200px; margin: 0 auto; }

        header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid rgba(255,0,0,0.1); }
        .logo { font-family: 'Syncopate'; color: var(--red); font-size: 1.2rem; text-decoration: none; font-weight: 900; }
        nav a { color: white; text-decoration: none; margin-left: 15px; font-size: 0.7rem; font-weight: 700; letter-spacing: 1px; }

        .hero { padding: 40px 0; text-align: center; }
        .hero h1 { font-family: 'Syncopate'; font-size: clamp(2rem, 10vw, 4.5rem); margin: 0; line-height: 1; }
        .hero p { color: var(--red); font-weight: 900; letter-spacing: 3px; margin-top: 10px; font-size: 0.8rem; }

        .search-area { margin: 30px 0; }
        #beatSearch { width: 100%; padding: 15px; background: var(--grey); border: 1px solid #333; color: white; border-radius: 12px; outline: none; font-size: 1rem; }

        /* FIXED GRID LOGIC FOR MOBILE */
        .beat-grid { display: grid; grid-template-columns: 1fr; gap: 15px; padding-bottom: 100px; }
        @media (min-width: 992px) { .beat-grid { grid-template-columns: 1fr 1fr; } }

        .beat-card { background: var(--grey); border: 1px solid #222; padding: 12px; border-radius: 12px; display: flex; align-items: center; position: relative; }
        .beat-img { width: 60px; height: 60px; border-radius: 8px; margin-right: 12px; object-fit: cover; flex-shrink: 0; }
        
        .play-btn { width: 44px; height: 44px; border-radius: 50%; background: var(--red); border: none; color: white; cursor: pointer; margin-right: 12px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 1rem; }

        .beat-info { flex-grow: 1; min-width: 0; }
        .beat-info h3 { margin: 0; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-transform: uppercase; }
        .beat-info p { margin: 2px 0 0; font-size: 0.7rem; color: #666; }

        .price { font-weight: 900; color: var(--red); margin: 0 10px; font-size: 0.8rem; white-space: nowrap; }
        .buy-btn { background: white; border: none; padding: 8px 12px; border-radius: 6px; font-weight: 900; font-size: 0.7rem; cursor: pointer; }

        .sold .buy-btn { display: none; }
        .sold-label { position: absolute; right: 10px; top: 10px; color: var(--red); font-family: 'Syncopate'; font-size: 0.6rem; border: 1px solid var(--red); padding: 4px; transform: rotate(-5deg); background: rgba(5,5,5,0.9); }

        .player-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); border-top: 2px solid var(--red); padding: 15px 0; z-index: 1000; }
        .progress-bg { width: 100%; height: 3px; background: #222; position: absolute; top: 0; }
        #progress-fill { height: 100%; background: var(--red); width: 0%; }
        
        .stop-btn { background: transparent; border: 1px solid #444; color: #888; padding: 5px 8px; border-radius: 4px; font-family: 'Syncopate'; font-size: 0.5rem; cursor: pointer; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <a href="#" class="logo">PROD MNM</a>
            <nav>
                <a href="https://wa.me/27692776881">WHATSAPP</a>
                <a href="mailto:mpakatihazel@gmail.com">EMAIL</a>
            </nav>
        </header>

        <section class="hero">
            <h1>IN MAYHEM<br>WE TRUST</h1>
            <p>MNM OFFICIAL VAULT</p>
        </section>

        <div class="search-area">
            <input type="text" id="beatSearch" placeholder="Search for your next hit...">
        </div>

        <div class="beat-grid" id="beatGrid"></div>
    </div>

    <audio id="mainAudio"></audio>

    <div class="player-bar" id="playerBar" style="display:none;">
        <div class="progress-bg"><div id="progress-fill"></div></div>
        <div class="container" style="display:flex; justify-content: space-between; align-items: center; font-size: 0.65rem; font-family: 'Syncopate';">
            <div style="min-width: 0; flex: 1; margin-right: 10px;">
                <div id="nowPlayingTitle" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">TRACK</div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <span id="timeDisplay">00:00</span>
                <button class="stop-btn" onclick="stopAudio()">STOP X</button>
            </div>
        </div>
    </div>

    <script>
        const beats = [
            { id: 1, title: "MANOLO", bpm: 140, price: "R700", sold: false, image: "b.JPEG", audio: "beats/1.mp3" },
            { id: 2, title: "HAMBO LALA", bpm: 128, price: "R700", sold: false, image: "b.JPEG", audio: "beats/2.mp3" },
            { id: 3, title: "MAYHEM FREE STYLE", bpm: 150, price: "R700", sold: false, image: "b.JPEG", audio: "audio/mayhem.mp3" }
        ];

        const grid = document.getElementById('beatGrid');
        const mainAudio = document.getElementById('mainAudio');
        const progressFill = document.getElementById('progress-fill');
        const playerBar = document.getElementById('playerBar');
        const nowPlayingTitle = document.getElementById('nowPlayingTitle');
        const timeDisplay = document.getElementById('timeDisplay');

        function render(filter = "") {
            grid.innerHTML = "";
            beats.filter(b => b.title.toLowerCase().includes(filter.toLowerCase())).forEach(beat => {
                const card = document.createElement('div');
                card.className = `beat-card ${beat.sold ? 'sold' : ''}`;
                card.innerHTML = `
                    <img src="${beat.image}" class="beat-img">
                    <button class="play-btn" onclick="togglePlay('${beat.audio}', '${beat.title}', this)">▶</button>
                    <div class="beat-info">
                        <h3>${beat.title}</h3>
                        <p>${beat.bpm} BPM</p>
                    </div>
                    ${beat.sold ? '<div class="sold-label">SOLD</div>' : `<div class="price">${beat.price}</div><button class="buy-btn" onclick="buyEmail(${beat.id})">BUY</button>`}
                `;
                grid.appendChild(card);
            });
        }

        function togglePlay(file, title, btn) {
            if (mainAudio.src.includes(file)) {
                if (mainAudio.paused) {
                    mainAudio.play();
                    btn.innerText = "⏸";
                } else {
                    mainAudio.pause();
                    btn.innerText = "▶";
                }
            } else {
                resetButtons();
                mainAudio.src = file;
                mainAudio.play();
                btn.innerText = "⏸";
                playerBar.style.display = "block";
                nowPlayingTitle.innerText = title;
            }
        }

        function stopAudio() {
            mainAudio.pause();
            mainAudio.currentTime = 0;
            playerBar.style.display = "none";
            resetButtons();
        }

        function resetButtons() {
            document.querySelectorAll('.play-btn').forEach(b => b.innerText = "▶");
        }

        mainAudio.ontimeupdate = () => {
            if (mainAudio.duration) {
                const pct = (mainAudio.currentTime / mainAudio.duration) * 100;
                progressFill.style.width = pct + "%";
                let mins = Math.floor(mainAudio.currentTime / 60);
                let secs = Math.floor(mainAudio.currentTime % 60);
                timeDisplay.innerText = `${mins}:${secs < 10 ? '0'+secs : secs}`;
            }
        };

        function buyEmail(id) {
            const beat = beats.find(b => b.id === id);
            window.location.href = `mailto:mpakatihazel@gmail.com?subject=Purchase: ${beat.title}`;
        }

        document.getElementById('beatSearch').addEventListener('input', (e) => render(e.target.value));
        render();
    </script>
</body>
</html>
